### 关于package

***

#### 1. package概述

Go使用包来组织程序，包是多个Go程序源码的集合，同时系统提供诸多内置包，如fmt，io，os等。

任何Go的程序必须数以某个包，同时源代码第一行必须是声明package的语句

```go
package main
```

Go语言复用的基础是包，Go语言入口主函数main()所在的包为main。

**Go语言包可以与目录不同名**

包名的定义无需包含路径，即源代码第一行声明包与路径无关，但使用import进行引入的时候需要声明相对src的路径

**包的习惯**

1. 包名小写且具有实际意义

2. 一般情况下要与路径名相同

3. 习惯性使用域名作为包名（类比Java）

4. main包为应用程序的入口包，编译无main包的源码无法执行

5. 同一个文件夹下只能属于同一个包，同样同一个包的源代码只能在同一个文件夹下

   

#### 2. import导入方法

```go
//单行引入
import "pck1"
import "pck2"
```

```go
//多行导入
import(
	"/aaa/bbb/pck1"
    "/ccc/pck2"
    "pck3"
)
```



#### 3. 包的引用格式

​	1）标准引用

```go
import "fmt"
```

此时使用fmt作为调用前缀，如fmt.Println()

​	2) 自定义别名

```go
import f "fmt"
```

此时f为fmt包的别名，可以使用f进行调用，如f.Println()

​	3）省略引用

```go
import . "fmt"
import. "fmt" //可无空格
```

此时可以省略前缀，直接调用fmt

​	4）匿名引用

```go
import _ "fmt"
```

当需要利用包产生的副作用，并不实际使用包的时候会产生编译错误，通过匿名导入的方式可以跳过init



#### 4、包加载

![Go 包的初始化](http://c.biancheng.net/uploads/allimg/190821/4-1ZR1102245R8.gif)

包的初始化程序从main函数引用的包开始，逐级查找包的引用，直到没有其他引用，最终生成一个包引用的有向无环图。Go编译器会将有向无环图转化为一棵树，然后从树的叶子节点开始逐层向上对包进行初始化。

